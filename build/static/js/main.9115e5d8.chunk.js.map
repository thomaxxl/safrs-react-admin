{"version":3,"sources":["../../../node_modules/deepmerge/dist/es.js","../../src/errors.ts","../../src/default-settings.ts","../../src/resourceLookup.ts","Config.js","components/JoinModal.js","DynResource.js","components/Home.js","components/Menu.js","components/Layout.js","App.js","../../src/ra-jsonapi-provider.ts","reportWebVitals.js","index.js"],"names":["isMergeableObject","value","isNonNullObject","stringValue","Object","isReactElement","isSpecial","REACT_ELEMENT_TYPE","Symbol","cloneUnlessOtherwiseSpecified","options","deepmerge","val","Array","defaultArrayMerge","target","source","element","sourceIsArray","destination","mergeObject","array","Error","prev","next","deepmerge_1","SafrsHttpError","defaultSettings","total","headers","Accept","updateMethod","arrayFormat","includeRelations","errorHandler","errors","httpError","console","endpointToTypeStripLastLetters","ResourceLookup","this","response","resources","entry","key","getKey","resource","get","has","lookup","unwrapData","s","ret","id","includes","relationName","relation","includedRelation","includedResource","relationshipData","reset_Conf","reload","log","config","localStorage","setItem","JSON","stringify","window","location","get_Conf","ls_conf","lsc_str","getItem","parse","e","warn","result","api_root","entries","resource_name","columns","relationships","search","name","col","rel","fks","fk","relationship","target_resource","push","style","position","top","left","transform","width","bgcolor","border","boxShadow","p","JoinModal","label","content","React","open","setOpen","Button","onClick","stopPropagation","Modal","onClose","Box","sx","Typography","variant","component","mt","searchFilters","TextInput","alwaysOn","ColumnField","column","default_comp","TextField","Component","loadable","resolveComponent","components","alert","error","JoinedField","join","record","useRecordContext","useState","item","dataProvider","useDataProvider","useEffect","getOne","then","data","user_key","conf","filter","component_name","LabelComponent","instance","load_custom_component","gen_DynResourceList","props","refresh","useRefresh","fields","joins","direction","map","hidden","column_fields","buttons","edit","EditButton","delete","FunctionField","render","fill","deleteField","filters","perPage","Datagrid","rowClick","catch","DynInput","ReferenceInput","reference","AutocompleteInput","optionText","ResourceTitle","ContactName","ShowField","Grid","xs","color","RelatedInstance","resource_conf","gen_DynResourceShow","title","SimpleShowLayout","margin","container","spacing","m","TabbedShowLayout","setLoading","setError","setRelated","target_cols","Tab","ReferenceManyField","addLabel","attributes","DynRelationshipMany","related","rel_resource","type","rel_id","DynRelationship","DynResource","List","useMemo","Create","SimpleForm","Edit","gen_DynResourceEdit","Show","Resource","list","create","show","useStyles","makeStyles","theme","widget","marginRight","marginTop","marginBottom","textInput","Home","classes","saveEdit","text","parsed_conf","setApiroot","setBgColor","taConf","setTaConf","bgColor","autosave","setAutosave","className","size","defaultValue","FormControlLabel","control","Checkbox","checked","onChange","event","TextareaAutosize","minRows","backgroundColor","evt","onMenuClick","Menu","useSelector","getResources","MenuItemLink","to","primaryText","leftIcon","icon","sidebarIsOpen","DashboardMenuItem","Layout","menu","userSettings","httpClient","fetchUtils","fetchJson","countHeader","settings","merge","getList","params","page","query","sort","prefix","ir","include","url","apiUrl","json","err","Promise","getMany","getManyReference","field","order","range","filter_","update","arr","i","method","body","updateMany","responses","Headers","deleteMany","jsonapiClient","AsyncResources","setResources","res","keys","AdminUI","layout","HomeIcon","App","AdminContext","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.9115e5d8.chunk.js","sourcesContent":["var isMergeableObject = function isMergeableObject(value) {\n\treturn isNonNullObject(value)\n\t\t&& !isSpecial(value)\n};\n\nfunction isNonNullObject(value) {\n\treturn !!value && typeof value === 'object'\n}\n\nfunction isSpecial(value) {\n\tvar stringValue = Object.prototype.toString.call(value);\n\n\treturn stringValue === '[object RegExp]'\n\t\t|| stringValue === '[object Date]'\n\t\t|| isReactElement(value)\n}\n\n// see https://github.com/facebook/react/blob/b5ac963fb791d1298e7f396236383bc955f916c1/src/isomorphic/classic/element/ReactElement.js#L21-L25\nvar canUseSymbol = typeof Symbol === 'function' && Symbol.for;\nvar REACT_ELEMENT_TYPE = canUseSymbol ? Symbol.for('react.element') : 0xeac7;\n\nfunction isReactElement(value) {\n\treturn value.$$typeof === REACT_ELEMENT_TYPE\n}\n\nfunction emptyTarget(val) {\n\treturn Array.isArray(val) ? [] : {}\n}\n\nfunction cloneUnlessOtherwiseSpecified(value, options) {\n\treturn (options.clone !== false && options.isMergeableObject(value))\n\t\t? deepmerge(emptyTarget(value), value, options)\n\t\t: value\n}\n\nfunction defaultArrayMerge(target, source, options) {\n\treturn target.concat(source).map(function(element) {\n\t\treturn cloneUnlessOtherwiseSpecified(element, options)\n\t})\n}\n\nfunction mergeObject(target, source, options) {\n\tvar destination = {};\n\tif (options.isMergeableObject(target)) {\n\t\tObject.keys(target).forEach(function(key) {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(target[key], options);\n\t\t});\n\t}\n\tObject.keys(source).forEach(function(key) {\n\t\tif (!options.isMergeableObject(source[key]) || !target[key]) {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(source[key], options);\n\t\t} else {\n\t\t\tdestination[key] = deepmerge(target[key], source[key], options);\n\t\t}\n\t});\n\treturn destination\n}\n\nfunction deepmerge(target, source, options) {\n\toptions = options || {};\n\toptions.arrayMerge = options.arrayMerge || defaultArrayMerge;\n\toptions.isMergeableObject = options.isMergeableObject || isMergeableObject;\n\n\tvar sourceIsArray = Array.isArray(source);\n\tvar targetIsArray = Array.isArray(target);\n\tvar sourceAndTargetTypesMatch = sourceIsArray === targetIsArray;\n\n\tif (!sourceAndTargetTypesMatch) {\n\t\treturn cloneUnlessOtherwiseSpecified(source, options)\n\t} else if (sourceIsArray) {\n\t\treturn options.arrayMerge(target, source, options)\n\t} else {\n\t\treturn mergeObject(target, source, options)\n\t}\n}\n\ndeepmerge.all = function deepmergeAll(array, options) {\n\tif (!Array.isArray(array)) {\n\t\tthrow new Error('first argument should be an array')\n\t}\n\n\treturn array.reduce(function(prev, next) {\n\t\treturn deepmerge(prev, next, options)\n\t}, {})\n};\n\nvar deepmerge_1 = deepmerge;\n\nexport default deepmerge_1;\n","import { HttpError } from 'react-admin';\n\nexport class NotImplementedError extends Error {\n  constructor(message: string) {\n    super(message);\n    this.message = message;\n    this.name = 'NotImplementedError';\n  }\n}\n\nexport class SafrsHttpError extends HttpError {\n  constructor(message: string, status: number, body: any) {\n    super(message, status, body);\n    this.name = 'SafrsHttpError';\n  }\n}\n\nexport const safrsErrorHandler: HttpErrorHandler = (\n  httpError: HttpError\n): HttpError => {\n  /* Example Safrs Error message\n  {\n    \"errors\": [\n      {\n        \"title\": \"Request forbidden -- authorization will not help\",\n        \"detail\": \"\",\n        \"code\": \"403\"\n      }\n    ]\n  } */\n  interface err {\n    title: string;\n    detail: string;\n    code: string;\n  }\n  const errors: { errors: err[] } = httpError.body; // JSON.parse(httpError.body.stringify);\n  if (errors?.errors.length > 0) {\n    return new SafrsHttpError(\n      errors.errors[0].title,\n      httpError.status,\n      errors.errors[0].code\n    );\n  } else {\n    console.log('Unsopported Http Error Body', httpError.body);\n    return httpError;\n  }\n};\n\nexport interface HttpErrorHandler {\n  (httpError: HttpError): HttpError;\n}\n","import { safrsErrorHandler, HttpErrorHandler } from './errors';\nimport { includeRelations } from './ra-jsonapi-provider';\n\nexport const defaultSettings: settings = {\n  total: 'total',\n  headers: {\n    Accept: 'application/vnd.api+json; charset=utf-8',\n    'Content-Type': 'application/vnd.api+json; charset=utf-8'\n  },\n  updateMethod: 'PATCH',\n  arrayFormat: 'brackets',\n  includeRelations: [],\n  errorHandler: safrsErrorHandler,\n  endpointToTypeStripLastLetters: ['Model', 's'] // update/create type: UserModel -> User, Users -> User\n};\n\ninterface settings {\n  total: string;\n  headers: {};\n  updateMethod: string;\n  arrayFormat: string;\n  includeRelations: includeRelations[];\n  errorHandler: HttpErrorHandler;\n  endpointToTypeStripLastLetters?: string[];\n}\n","/**\n * A map-like class that maps resource linkage objects {id: 1, type: \"user\"} to concrete resources with attributes and\n * relationships\n */\nexport default class ResourceLookup {\n  lookup: Map<any, any>;\n  includes: string[];\n  /**\n   * Constructs a new lookup map\n   * @param {Object} response A JSON API response, in JSON format\n   */\n  constructor(response: any) {\n    this.lookup = new Map();\n    this.includes = [];\n\n    // If the response wasn't a JSON dictionary, we can't and don't need to build a lookup\n    if (typeof response !== 'object') return;\n\n    let resources;\n    // if (response.hasOwnProperty('included')) {\n    if (Object.prototype.hasOwnProperty.call(response, 'included')) {\n      resources = [...response.data, ...response.included];\n    } else {\n      resources = response.data;\n    }\n\n    // Iterate over each resource returned and put each in the lookup\n    for (const entry of resources) {\n      const key = this.getKey(entry);\n      this.lookup.set(key, entry);\n    }\n  }\n\n  /**\n   * Calculates a hashable key for JSON API resources\n   * @param resource A resource linkage object\n   * @returns {string}\n   */\n  getKey(resource: any) {\n    return `${resource.type}:${resource.id}`;\n  }\n\n  /**\n   * Looks up a resource\n   * @param resource A resource linkage object\n   * @returns {Object}\n   */\n  get(resource: any) {\n    // If we don't have included data for this resource, just return the Resource Linkage object, since that's still\n    // useful\n    if (this.has(resource)) {\n      return this.lookup.get(this.getKey(resource));\n    } else {\n      return resource;\n    }\n  }\n\n  /**\n   * Returns true if the resource is in the lookup\n   * @param resource\n   * @returns {boolean}\n   */\n  has(resource: any) {\n    return this.lookup.has(this.getKey(resource));\n  }\n\n  /**\n   * Converts a JSON API data object (with id, type, and attributes fields) into a flattened object\n   * @param {Object} response A JSON API data object\n   */\n  unwrapData(response: any, includes: string[]) {\n    // The base resource object\n    const ret = Object.assign(\n      {\n        id: response.id\n      },\n      response.attributes\n    );\n    if (includes.length === 0) {\n      // shortcut, no includes: scip relationships\n      return ret;\n    }\n    // Deal with relationships\n    // if (response.hasOwnProperty('relationships')) {\n    if (Object.prototype.hasOwnProperty.call(response, 'relationships')) {\n      // ret.relationships = {};\n      for (const relationName of Object.keys(response.relationships)) {\n        if (!includes.includes(relationName)) {\n          continue; // if we do not have includes for rlationships, we skip\n        }\n        if (includes && relationName in includes) {\n          continue;\n        }\n        const relation = response.relationships[relationName].data;\n        if (Array.isArray(relation)) {\n          ret[relationName] = relation.map((resource) => {\n            const includedRelation = this.get(resource);\n            const relationshipData = Object.assign(\n              {\n                id: includedRelation.id\n              },\n              includedRelation.attributes\n            );\n            return relationshipData; // this.unwrapData(this.get(resource));\n          });\n        } else if (relation == null) {\n          continue; // empty many to one relanships return a null value in jsaonaopi spec , == instead of ===: doing nothing also in case of undefined\n        } else {\n          const includedResource = this.get(relation);\n          const relationshipData = Object.assign(\n            {\n              id: includedResource.id\n            },\n            includedResource.attributes\n          );\n          ret[lowerFirstLetter(relation.type)] = relationshipData; // this.unwrapData(this.get(relation)); // ret.relationships[relationName] =\n        }\n      }\n    }\n\n    return ret;\n  }\n}\n\nfunction lowerFirstLetter(s: string): string {\n  return s[0].toLowerCase() + s.slice(1);\n}\n","import config from './Config.json'\r\n\r\n\r\nconst get_Conf = () => {\r\n\r\n    let ls_conf = null\r\n    const lsc_str = localStorage.getItem(\"raconf\")\r\n    try{\r\n        ls_conf = JSON.parse(lsc_str)\r\n    }\r\n    catch(e){\r\n        console.warn(`Failed to parse config ${lsc_str}`)\r\n        localStorage.setItem(\"raconf\", JSON.stringify(config))\r\n    }\r\n\r\n    let result = ls_conf ? ls_conf : JSON.parse(JSON.stringify(config)) || {};\r\n    \r\n    result.api_root = result?.api_root ? result.api_root : 'https://apilogicserver.pythonanywhere.com/'\r\n    result.api_root = 'https://apilogicserver.pythonanywhere.com/'\r\n    result.api_root = result.api_root ? result.api_root : 'https://apilogicserver.pythonanywhere.com/'\r\n    //result.api_root = 'http://172.16.17.31:5000' // 'https://apilogicserver.pythonanywhere.com/'\r\n    const resources = result.resources\r\n\r\n    for(let [resource_name, resource] of Object.entries(resources)){\r\n        \r\n        // link relationship to FK column\r\n        if(!(resource.columns instanceof Array || resource.relationships instanceof Array)){\r\n            continue\r\n        }\r\n\r\n        resource.search = []\r\n        result.resources[resource_name].name = resource_name\r\n\r\n        for(let col of resource.columns){\r\n            for(let rel of resource.relationships){\r\n                for(let fk of rel.fks || []){\r\n                    if(col.name == fk){\r\n                        col.relationship = rel;\r\n                        col.relationship.target_resource = result.resources[col.relationship.target]\r\n                    }\r\n                }\r\n            }\r\n            if(col.search){\r\n                resource.search.push(col);\r\n            }\r\n        }\r\n    }\r\n    \r\n    return result || reset_Conf()\r\n}\r\n\r\nexport const reset_Conf = (reload) => {\r\n    console.log(\"Resetting conf\", config)\r\n    localStorage.setItem(\"raconf\", JSON.stringify(config));\r\n    if(reload){\r\n        window.location.reload()\r\n    }\r\n    return config\r\n}\r\n\r\nexport default get_Conf()","import * as React from 'react';\r\nimport Box from '@material-ui/core/Box';\r\nimport Button from '@material-ui/core/Button';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Modal from '@material-ui/core/Modal';\r\n\r\nconst style = {\r\n  position: 'absolute',\r\n  top: '50%',\r\n  left: '50%',\r\n  transform: 'translate(-50%, -50%)',\r\n  width: 400,\r\n  bgcolor: 'background.paper',\r\n  border: '2px solid #000',\r\n  boxShadow: 24,\r\n  p: 4,\r\n};\r\n\r\nexport default function JoinModal({label, content}) {\r\n  const [open, setOpen] = React.useState(false);\r\n  const handleOpen = (e) => {setOpen(true); e.stopPropagation();}\r\n  const handleClose = (e) => {setOpen(false);e.stopPropagation();}\r\n\r\n  return (\r\n    <div>\r\n      <Button onClick={handleOpen}>{label}</Button>\r\n      <Modal\r\n        open={open}\r\n        onClose={handleClose}\r\n        aria-labelledby=\"modal-modal-title\"\r\n        aria-describedby=\"modal-modal-description\"\r\n      >\r\n        <Box sx={style}>\r\n          <Typography id=\"modal-modal-title\" variant=\"h6\" component=\"h2\">\r\n            {label}\r\n          </Typography>\r\n          <Typography id=\"modal-modal-description\" sx={{ mt: 2 }}>\r\n            {content}\r\n          </Typography>\r\n        </Box>\r\n      </Modal>\r\n    </div>\r\n  );\r\n}","import React from \"react\";\n\nimport { useState, useEffect, useMemo} from 'react';\nimport { List,\n    Datagrid,\n    TextField,\n    EditButton,\n} from \"react-admin\";\nimport Grid from '@material-ui/core/Grid';\nimport { Resource, TabbedShowLayout, Tab } from 'react-admin';\nimport {\n  Edit,\n  Create,\n  Show,\n  SimpleForm,\n  TextInput,\n  SimpleShowLayout,\n  ReferenceManyField,\n  useRecordContext\n} from \"react-admin\";\nimport { Typography } from '@material-ui/core';\nimport { useRefresh } from 'react-admin';\nimport { useDataProvider } from 'react-admin';\nimport { FunctionField } from 'react-admin';\nimport DeleteIcon from \"@material-ui/icons/Delete\";\nimport conf from './Config.js'\nimport loadable from '@loadable/component'\nimport Popover from '@material-ui/core/Popover';\nimport Button from '@material-ui/core/Button';\nimport JoinModal from './components/JoinModal'\nimport { AutocompleteInput, ReferenceInput } from 'react-admin';\nimport { Pagination } from 'react-admin';\n\nconst searchFilters = [\n    <TextInput source=\"q\" label=\"Search\" alwaysOn />\n];\n\nconst ColumnField = ({column}) => {\n    \n    const component = column.component\n    const style = column.style || {}\n    console.log(style)\n        \n    const default_comp = <TextField source={column.name} key={column.name} style={style} />\n    if(!component){\n        return default_comp\n    }\n    // component is specified => render the specified component\n    try{\n        const Component = loadable(() => import(`./components/Custom.js`), {\n            resolveComponent: (components) => components[`${component}`],\n        })\n        return <Component column={column}/>\n    }\n    catch(e){\n        alert(\"Custom component error\")\n        console.error(\"Custom component error\", e)\n    }\n    return default_comp\n}\n\n\nconst load_custom_component = (component_name, item) => {\n\n    try{\n        const LabelComponent = loadable(() => import(`./components/Custom.js`), {\n            resolveComponent: (components) => components[`${component_name}`],\n        })\n        return <LabelComponent instance={item} />\n    }\n    catch(e){\n        alert(\"Custom component error\")\n        console.error(\"Custom component error\", e)\n    }\n    return null\n}\n\nconst JoinedField = ({column, join}) => {\n    const record = useRecordContext();\n    const id = record.id\n    const target_resource = join.target\n    const [item, setItem] = useState(false)\n    const dataProvider = useDataProvider();\n    const fk = join.fks[0]\n    \n    useEffect(() => {\n        dataProvider.getOne(target_resource, { id: record[fk] })\n            .then(({ data }) => {\n                setItem(data);\n            })\n    }, []);\n    \n    const user_key = conf.resources[join.target]?.user_key\n    let label = id\n    \n    if(item && user_key ){\n        // user_key can be a column name or a custom component\n        const target_col = column.relationship.target_resource.columns.filter((col) => col.name == user_key)\n        \n        if(target_col){\n            console.log(item)\n            label = <span>{item[user_key] || id}</span>\n        }\n        else {\n            label = load_custom_component(user_key, item)\n        }\n    }\n    \n    const data = <RelatedInstance instance={item} resource_name={join.target}/>\n    return <JoinModal label={label} key={column.name} content={data}/>\n}\n\n\nconst column_fields = (columns, relationships) => {\n\n    const joins = relationships.filter(rel => rel.direction === \"toone\")\n    const fields = columns.map((column) => {\n\n        if (column.hidden){\n            return null;\n        }\n        for(let join of joins){\n            // check if the column is a (toone) relationship FK\n            for(let fk of join.fks){\n                if(column.name == fk){\n                    return <JoinedField key={column.name} column={column} join={join} label={column.label? column.label: column.name}/>\n                }\n            }\n        }\n        return <ColumnField key={column.name} column={column} label={column.label? column.label: column.name}/>\n        }\n    )\n    return fields\n}\n\n\nconst DynPagination = props => (\n    <Pagination rowsPerPageOptions={[10, 25, 50, 100]}\n                perPage={25}\n                {...props} />\n);\n\n\nexport const gen_DynResourceList = (resource) => (props) => {\n\n    const columns = resource.columns\n    const relationships = resource.relationships\n    const dataProvider = useDataProvider();\n    const refresh = useRefresh();\n    const fields = column_fields(columns, relationships);\n    const buttons = [\n        resource.edit !== false ? <EditButton key={resource.name} label={\"\"}/> : null,\n        resource.delete !== false ? <FunctionField \n                onClick={(e)=> {e.stopPropagation()}}\n                key={resource.name}\n                render={record => <DeleteIcon style={{fill: \"#3f51b5\"}} onClick={(item)=>deleteField(dataProvider, props.resource, record, refresh)}/>}\n        /> : null\n    ]\n    \n    return <List filters={searchFilters} \n                perPage={10}\n                {...props} >\n                <Datagrid rowClick=\"show\">\n                    {fields}\n                    {buttons}\n                </Datagrid>\n            </List>\n};\n\n\nexport const gen_DynResourceEdit = (resource) => {\n    \n    const columns = resource.columns;\n\n    const Result = (props) => {\n        console.log(props)\n        return <Edit {...props}>\n            <SimpleForm>\n                {columns.map((col) => <DynInput column={col} key={col.name}/> )}\n            </SimpleForm>\n        </Edit>\n    }\n    return Result;\n}\n\n\nconst deleteField = (dataProvider, resource, record, refresh) => {\n\n    console.log(record)\n    dataProvider.delete(resource, record).then(()=>{\n        refresh();\n        }\n    ).catch((e)=> alert('error'))\n}\n\n\nconst DynInput = ({column, resource}) => {\n\n    console.log(column);\n    if(column.relationship?.direction == \"toone\" && column.relationship.target){\n        const search_cols = \"ProductName\" \n        if(!search_cols){\n            console.error(\"no searchable columns configured\");\n            \n        }\n        return <ReferenceInput label={column.name} source={column.name} reference={column.relationship.target}>\n                    <AutocompleteInput optionText=\"ProductName\" />\n                </ReferenceInput>\n        return <ReferenceInput label={column.relationship.name} source=\"post_id\" reference={column.relationship.target} >\n                    <AutocompleteInput optionText={search_cols[0].name} />\n                </ReferenceInput>\n    }\n    return <TextInput source={column.name}/>\n}\n\nexport const gen_DynResourceCreate = (resource) => (props) => {\n\n    \n    return <Create {...props}>\n        <SimpleForm>\n            {resource.columns.map((col) => <DynInput column={col} resource={resource} key={col.name}/> )}\n        </SimpleForm>\n    </Create >\n};\n\n\nconst ResourceTitle = ({ record }) => {\n    return <span>Post {record ? `ID: \"${record.id}\" ContactName: \"${record.ContactName}\"` : ''}</span>;\n};\n\n\n\nconst ShowField = ({ source }) => {\n  const record = useRecordContext();\n  return record ? (\n    <Grid item xs={3}>\n      <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\n        {source}\n      </Typography>\n      <Typography variant=\"body2\" component=\"p\">\n        {record[source]}\n      </Typography>\n    </Grid>\n  ) : null;\n};\n\n\nconst DynRelationship = (resource, id, relationship) => {\n\n    const [loading, setLoading] = useState(true);\n    const [error, setError] = useState();\n    const [related, setRelated] = useState(false);\n    const dataProvider = useDataProvider();\n    \n    useEffect(() => {\n        dataProvider.getOne(resource, { id: id })\n            .then(({ data }) => {\n                console.log('data',data);\n                return { rel_resource: data[relationship.target]?.data.type, rel_id: data[relationship.target]?.data.id }\n            })\n            .then(({rel_resource, rel_id}) => {\n                console.log(rel_resource, rel_id)\n                dataProvider.getOne(rel_resource, { id: rel_id }).then(({data}) =>\n                   setRelated(data)\n                )\n                setLoading(false);\n            })\n            .catch(error => {\n                setError(error);\n                setLoading(false);\n            })\n    }, []);\n    \n\n    return <Tab label={relationship.name}>\n               <RelatedInstance instance={related} resource_name={relationship.target} />\n            </Tab>\n}\n\nconst RelatedInstance = ({instance, resource_name}) => {\n\n    const resource_conf = conf[resource_name]\n    const columns = resource_conf?.columns ? resource_conf?.columns : [];\n    const result = <dl>\n                        {columns.map( (col) => <div key={col.name}>\n                                    <dt><b>{col.name}</b></dt><dd>{instance[col.name]}</dd>\n                                    </div>\n                                )}\n                    </dl>\n    \n    return result;\n}\n\n\nconst DynRelationshipMany = (resource, id, relationship) => {\n\n    const [loading, setLoading] = useState(true);\n    const [error, setError] = useState();\n    const [related, setRelated] = useState(false);\n    const dataProvider = useDataProvider();\n\n    useEffect(() => {\n        dataProvider.getOne(resource, { id: id })\n            .then(({ data }) => {\n                setRelated(data.relationships);\n                setLoading(false);\n            })\n            .catch(error => {\n                setError(error);\n                setLoading(false);\n            })\n    }, []);\n\n    const target_cols = conf[relationship.target]?.columns\n\n    return <Tab label={relationship.name}>\n                <ReferenceManyField reference={relationship.target} target={relationship.fks[0]} addLabel = {false}>\n                    <Datagrid rowClick=\"show\">\n                        {target_cols?.map( (col) => \n                            <FunctionField\n                                    label={col.name}\n                                    key={col.name}\n                                    render={record => <span>{record?.attributes ? record?.attributes[col.name] : ''}</span>} />\n                        )}\n                    <EditButton />\n                    </Datagrid>\n                </ReferenceManyField>\n            </Tab>\n}\n\n\nexport const gen_DynResourceShow = (columns, relationships) => (props) => {\n\n    return <Show title={<ResourceTitle />} {...props}>\n                <SimpleShowLayout>\n                    \n                    <Typography variant=\"h5\" component=\"h5\" style={{ margin: \"30px 0px 30px\" }}>\n                        Instance Data:\n                    </Typography>\n\n                    <Grid container spacing={3} margin={5} m={40}>\n                        {columns.map((col) => <ShowField source={col.name}/> )}\n                    </Grid>\n                    \n                    <hr style={{ margin: \"30px 0px 30px\" }}/>\n\n                    <TabbedShowLayout>\n                        {relationships.map((rel) => rel.direction === \"tomany\" ?  // <> \"toone\"\n                            DynRelationshipMany(props.resource, props.id, rel) : \n                            DynRelationship(props.resource, props.id, rel)) }\n                    </TabbedShowLayout>\n\n                </SimpleShowLayout>\n            </Show>\n}\n\n\nexport const DynResource = (props) => {\n    const resource_conf = conf.resources[props.name]\n    const List= useMemo(()=> gen_DynResourceList(resource_conf), [resource_conf])\n    const Create = useMemo(()=> gen_DynResourceCreate(resource_conf), [resource_conf])\n    const Edit = useMemo(()=> gen_DynResourceEdit(resource_conf), [resource_conf])\n    const Show = useMemo(()=> gen_DynResourceShow(resource_conf.columns, resource_conf.relationships), [resource_conf])    \n    return <Resource key={props.name} {...props} list={List} edit={Edit} create={Create} show={Show} />\n}\n\n","import { TextareaAutosize, TextField } from '@material-ui/core';\r\nimport Checkbox from \"@material-ui/core/Checkbox\";\r\nimport Button from '@material-ui/core/Button';\r\nimport { useState, useEffect } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\r\nimport {reset_Conf} from \"../Config\"\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    widget : {\r\n        border: \"1px solid #3f51b5\",\r\n        marginRight: \"1em\",\r\n        marginTop : \"1em\",\r\n        marginBottom : \"1em\"\r\n    },\r\n    textInput : {\r\n        width : \"80%\"\r\n    }\r\n}));\r\n    \r\n\r\nconst Home = () => {\r\n\r\n    const classes = useStyles();\r\n\r\n    const saveEdit = (text) => {\r\n        try{\r\n            if(text){\r\n                const parsed_conf = JSON.parse(text);\r\n                setApiroot(parsed_conf.api_root);\r\n            }\r\n            setBgColor(\"#ddeedd\");\r\n            localStorage.setItem(\"raconf\", text);\r\n            if(!taConf){\r\n                window.location.reload();\r\n            }\r\n        }catch (e){\r\n            setBgColor(\"#eedddd\");\r\n        }\r\n        setTaConf(text)\r\n    }\r\n\r\n    let conf = localStorage.getItem(\"raconf\") ||  JSON.stringify(reset_Conf())\r\n    const [taConf, setTaConf] = useState(conf ? JSON.stringify(JSON.parse(conf), null, 4) : \"\");\r\n    const [bgColor, setBgColor] = useState(\"#ddeedd\");\r\n    const [autosave, setAutosave] = useState(true);\r\n    const [api_root, setApiroot] = useState(JSON.parse(conf)?.api_root);\r\n    \r\n    const handleAutoSaveChange = (event) => {\r\n        setAutosave(event.target.checked);\r\n    };\r\n\r\n    return <div >\r\n                <div>\r\n                    <TextField\r\n                        className={classes.textInput}\r\n                        variant=\"outlined\"\r\n                        id=\"outlined-helperText\"\r\n                        label=\"API root URL\"\r\n                        size=\"small\"\r\n                        defaultValue={api_root}\r\n                    />\r\n                    <br/>\r\n                    <Button className={classes.widget} onClick={()=> saveEdit(\"\")} color=\"primary\" >Clear</Button>\r\n                    <Button className={classes.widget} onClick={()=> reset_Conf()} color=\"primary\" >Reset</Button>\r\n                    <Button className={classes.widget} onClick={()=> window.location.reload()} color=\"primary\" >Apply</Button>\r\n                    <FormControlLabel\r\n                        control={<Checkbox checked={autosave} onChange={handleAutoSaveChange} />}\r\n                        label=\"Auto Save Config\"\r\n                    />\r\n                    \r\n                </div>\r\n                <TextareaAutosize\r\n                    variant=\"outlined\"\r\n                    minRows={3}\r\n                    className={classes.textInput}\r\n                    style={{ backgroundColor : bgColor }}\r\n                    value= {taConf}\r\n                    onChange={(evt)=>saveEdit(evt.target.value)}\r\n                />\r\n                \r\n            </div>\r\n}\r\n\r\nexport default Home","import { useSelector } from 'react-redux';\r\nimport { DashboardMenuItem, Menu as RAMenu, MenuItemLink, getResources } from 'react-admin';\r\nimport DefaultIcon from '@material-ui/icons/ViewList';\r\n\r\n/*\r\nexport const MenuA = (props) => (\r\n    <RAMenu {...props}>\r\n        <DashboardMenuItem />\r\n        <MenuItemLink to=\"/wxxx\" primaryText=\"Posts\" leftIcon={<BookIcon />}/>\r\n        <MenuItemLink to=\"/comments\" primaryText=\"Comments\" leftIcon={<ChatBubbleIcon />}/>\r\n        <MenuItemLink to=\"/users\" primaryText=\"Users\" leftIcon={<PeopleIcon />}/>\r\n        <MenuItemLink to=\"/custom-route\" primaryText=\"Miscellaneous\" leftIcon={<LabelIcon />}/>\r\n    </RAMenu>\r\n);\r\n*/\r\n\r\nconst onMenuClick = (evt) => {\r\n    console.log(`Menu Click`, evt);\r\n}\r\n\r\nexport const Menu = (props) => {\r\n    const resources = useSelector(getResources);\r\n    const open = true;\r\n    return (\r\n        <RAMenu {...props}>\r\n            {resources.map(resource => (\r\n                <MenuItemLink\r\n                    key={resource.name}\r\n                    to={`/${resource.name}`}\r\n                    primaryText={\r\n                        (resource.options && resource.options.label) ||\r\n                        resource.name\r\n                    }\r\n                    leftIcon={\r\n                        resource.icon ? <resource.icon /> : <DefaultIcon />\r\n                    }\r\n                    onClick={onMenuClick}\r\n                    sidebarIsOpen={open}\r\n                />\r\n            ))}\r\n            <DashboardMenuItem />\r\n        </RAMenu>\r\n    );\r\n};","import { Layout as RALayout } from 'react-admin';\r\nimport { Menu } from './Menu';\r\n\r\nexport const Layout = (props) => <RALayout {...props} menu={Menu} />;","import * as React from 'react';\nimport { useEffect, useState } from 'react';\nimport { AdminContext, AdminUI, Resource, ListGuesser, useDataProvider } from 'react-admin';\n//import {jsonapiClient} from \"@agoe/rav3-jsonapi-client\"\nimport {jsonapiClient} from \"@agoe/rav3-jsonapi-client\"\nimport HomeIcon from '@material-ui/icons/Home';\nimport { DynResource } from './DynResource';\nimport Home from './components/Home.js'\nimport conf from './Config'\nimport { Layout }  from './components/Layout';\n\nconst dataProvider = jsonapiClient(conf.api_root); // http://localhost:5000\n\nconst AsyncResources = () => {\n    const [resources, setResources] = useState(false);\n    const dataProvider = useDataProvider();\n\n    useEffect(() => {\n        dataProvider.getResources().then((response) => {        \n            let res = Object.keys(response.data.resources).map((resource_name) => { return {name: resource_name} })\n            setResources(res)\n        })\n        .catch((err) => {\n            console.warn(err)\n            alert(`failed to fetch schema, no resources available for api ${conf.api_root}`)\n            setResources([])\n        })\n    }, []);\n\n    if(resources ===  false){\n        return <div>Loading...</div>\n    }\n    return (\n        <AdminUI layout={Layout}>\n            <Resource name=\"Home\" show={Home} list={Home} options={{ label: 'Home' }} icon={HomeIcon}/>\n            {resources.map(resource => <DynResource name={resource.name} key={resource.name} />)}\n        </AdminUI>\n    );\n}\n\nconst App = () => {\n    return (\n        <AdminContext dataProvider={dataProvider}>\n            <AsyncResources />\n        </AdminContext>\n    );\n}\n\nexport default App;","import { stringify } from 'query-string';\nimport { fetchUtils, DataProvider, HttpError } from 'react-admin';\nimport merge from 'deepmerge';\nimport { defaultSettings } from './default-settings';\nimport ResourceLookup from './resourceLookup';\n\n/**\n * https://github.com/marmelab/react-admin/blob/master/packages/ra-data-simple-rest/src/index.ts\n * Latest commit 44a1d8f on 6 Dec 2020\n * 44a1d8f569db23a7fc826c1a9094e4e041cc51da\n * https://github.com/marmelab/react-admin/tree/44a1d8f569db23a7fc826c1a9094e4e041cc51da\n *\n * Maps react-admin queries to a simple REST API\n *\n * This REST dialect is similar to the one of FakeRest\n *\n * @see https://github.com/marmelab/FakeRest\n *\n * @example\n *\n * getList     => GET http://my.api.url/posts?sort=['title','ASC']&range=[0, 24]\n * getOne      => GET http://my.api.url/posts/123\n * getMany     => GET http://my.api.url/posts?filter={id:[123,456,789]}\n * update      => PUT http://my.api.url/posts/123\n * create      => POST http://my.api.url/posts\n * delete      => DELETE http://my.api.url/posts/123\n *\n * @example\n *\n * import * as React from \"react\";\n * import { Admin, Resource } from 'react-admin';\n * import simpleRestProvider from 'ra-data-simple-rest';\n *\n * import { PostList } from './posts';\n *\n * const App = () => (\n *     <Admin dataProvider={simpleRestProvider('http://path.to.my.api/')}>\n *         <Resource name=\"posts\" list={PostList} />\n *     </Admin>\n * );\n *\n * export default App;\n * export default (apiUrl, userSettings = {}) => (type, resource, params) => {\n  let url = '';\n  const settings = merge(defaultSettings, userSettings);\n\n  const options = {\n    headers: settings.headers,\n  };\n */\nexport const jsonapiClient = (\n  apiUrl: string,\n  userSettings = {},\n  httpClient = fetchUtils.fetchJson,\n  countHeader: string = 'Content-Range'\n): DataProvider => {\n  const settings = merge(defaultSettings, userSettings);\n  return {\n    getList: (resource, params) => {\n      /* const { page, perPage } = params.pagination\n    const { field, order } = params.sort\n\n    const rangeStart = (page - 1) * perPage\n    const rangeEnd = page * perPage - 1\n\n    const query = {\n      sort: JSON.stringify([field, order]),\n      range: JSON.stringify([rangeStart, rangeEnd]),\n      filter: JSON.stringify(params.filter)\n    }\n    const url = `${apiUrl}/${resource}?${stringify(query)}`\n    const options =\n      countHeader === 'Content-Range'\n        ? {\n            // Chrome doesn't return `Content-Range` header if no `Range` is provided in the request.\n            headers: new Headers({\n              Range: `${resource}=${rangeStart}-${rangeEnd}`\n            })\n          }\n        : {} */\n\n      const { page, perPage } = params.pagination;\n      console.log(page, perPage);\n\n      // Create query with pagination params.\n      const query = {\n        'page[number]': page,\n        'page[size]': perPage,\n        'page[offset]': (page - 1) * perPage,\n        'page[limit]': perPage,\n        sort: ' '\n      };\n\n      // Add all filter params to query.\n      if(params.filter?.q){\n        // search is requested by react-admin\n        query['filter'] = JSON.stringify([{\"name\":\"ProductName\",\"op\":\"like\",\"val\":`${params.filter.q}%`}])\n      }\n      else{\n        Object.keys(params.filter || {}).forEach((key) => {\n          query[`filter[${key}]`] = params.filter[key];\n        });\n      }\n\n      // Add sort parameter\n      if (params.sort && params.sort.field) {\n        const prefix = params.sort.order === 'ASC' ? '' : '-';\n        query.sort = `${prefix}${params.sort.field}`;\n      }\n      const includes: string[] = [];\n\n      const includeRelations: includeRelations[] = settings.includeRelations;\n\n      for (const ir of includeRelations) {\n        if (resource === ir.resource) {\n          query['include'] = ir.includes.join(',');\n          for (const include of ir.includes) {\n            includes.push(include);\n          }\n          break;\n        }\n      }\n\n      const url = `${apiUrl}/${resource}?${stringify(query)}`;\n\n      return httpClient(url)\n        .then(({ json }) => {\n          // const lookup = new ResourceLookup(json.data);\n          // When meta data and the 'total' setting is provided try\n          // to get the total count.\n          let total = 0;\n          if (json.meta && settings.total) {\n            total = json.meta[settings.total];\n          }\n          // Use the length of the data array as a fallback.\n          total = total || json.data.length; //  { id: any; attributes: any; }\n          const lookup = new ResourceLookup(json);\n          const jsonData = json.data.map((resource: any) =>\n            lookup.unwrapData(resource, includes)\n          );\n          /* const jsonData = json.data.map((value: any) => {\n          const relAttributeKey = Object.keys(value)[0];\n          return Object.assign(\n            { id: value.id },\n            value.attributes,\n            value[relAttributeKey]\n          );\n        }); */\n\n          return {\n            data: jsonData,\n            total: total\n          };\n        })\n        .catch((err: HttpError) => {\n          console.log('catch Error', err.body);\n          const errorHandler = settings.errorHandler;\n          return Promise.reject(errorHandler(err));\n        });\n    },\n\n    /* getOne: (resource, params) =>\n      httpClient(`${apiUrl}/${resource}/${params.id}`).then(({ json }) => ({\n        data: json.data\n      })), */\n\n    getOne: (resource: any, params: { id: any }) => {\n      const url = `${apiUrl}/${resource}/${params.id}?include=%2Ball&page[limit]=50`;\n      return httpClient(url).then(({ json }) => {\n        const { id, attributes, relationships } = json.data;\n        //const included = json.included;\n        Object.assign(attributes, relationships);\n        return {\n          data: {\n            id,\n            ...attributes\n          }\n        };\n      });\n    },\n\n    getMany: (resource, params) => {\n      resource = capitalize(resource);\n      /* const query = {\n        filter: JSON.stringify({ id: params.ids })\n      }; */\n      const query = 'filter[id]=' + JSON.stringify(params.ids);\n      // const url = `${apiUrl}/${resource}?${stringify(query)}`;\n      const url = `${apiUrl}/${resource}?${query}`;\n      return httpClient(url).then(({ json }) => {\n        // When meta data and the 'total' setting is provided try\n        // to get the total count.\n        let total = 0;\n        if (json.meta && settings.total) {\n          total = json.meta[settings.total];\n        }\n        // Use the length of the data array as a fallback.\n        total = total || json.data.length; //  { id: any; attributes: any; }\n        const jsonData = json.data.map((value: any) =>\n          Object.assign({ id: value.id }, value.attributes)\n        );\n\n        return {\n          data: jsonData,\n          total: total\n        };\n      });\n    },\n\n    getManyReference: (resource, params) => {\n      const { page, perPage } = params.pagination;\n      const { field, order } = params.sort;\n\n      // const rangeStart = (page - 1) * perPage;\n      // const rangeEnd = page * perPage - 1;\n\n      const query = {\n        sort: JSON.stringify([field, order]),\n        range: JSON.stringify([(page - 1) * perPage, page * perPage - 1]),\n        filter_: JSON.stringify({\n          ...params.filter\n        })\n      };\n      query[`filter[${params.target}]`] = params.id\n      const url = `${apiUrl}/${resource}?${stringify(query)}`;\n      const options = {};\n      /* countHeader === 'Content-Range'\n          ? {\n              // Chrome doesn't return `Content-Range` header if no `Range` is provided in the request.\n              headers: new Headers({\n                Range: `${resource}=${rangeStart}-${rangeEnd}`\n              })\n            }\n          : {} */\n\n      return httpClient(url, options).then(({ headers, json }) => {\n        if (!headers.has(countHeader)) {\n          console.debug(\n            `The ${countHeader} header is missing in the HTTP Response. The simple REST data provider expects responses for lists of resources to contain this header with the total number of results to build the pagination. If you are using CORS, did you declare ${countHeader} in the Access-Control-Expose-Headers header?`\n          );\n        }\n        return {\n          data: json.data,\n          total: 100\n          /*  countHeader === 'Content-Range'\n              ? parseInt(\n                  headers.get('content-range') ?? ''.split('/').pop() ?? '10',\n                  10\n                )\n              : parseInt(headers.get(countHeader.toLowerCase()) ?? '0')\n        }; */\n        };\n      });\n    },\n\n    update: (resource, params) => {\n      let type = resource;\n      const arr = settings.endpointToTypeStripLastLetters;\n      for (const i in arr) {\n        if (resource.endsWith(arr[i])) {\n          type = resource.slice(0, arr[i].length * -1);\n          break; // quit after first hit\n        }\n      }\n      const data = {\n        data: {\n          id: params.id,\n          type: type,\n          attributes: params.data\n        }\n      };\n      return httpClient(`${apiUrl}/${resource}/${params.id}`, {\n        method: settings.updateMethod,\n        body: JSON.stringify(data)\n      })\n        .then(({ json }) => {\n          const { id, attributes } = json.data;\n          /* const attributes = json.data;\n           delete attributes.id;\n          const updateData: any = {\n            any too keep compiler happy \n           data: {\n              id: params.id,\n              type: resource,\n              attributes: attributes\n            }\n          }; */\n          return {\n            data: {\n              id,\n              ...attributes\n            }\n          };\n        })\n        .catch((err: HttpError) => {\n          console.log('catch Error', err.body);\n          const errorHandler = settings.errorHandler;\n          return Promise.reject(errorHandler(err));\n        });\n    },\n\n    // simple-rest doesn't handle provide an updateMany route, so we fallback to calling update n times instead\n    updateMany: (resource, params) =>\n      Promise.all(\n        params.ids.map((id) =>\n          httpClient(`${apiUrl}/${resource}/${id}`, {\n            method: 'PUT',\n            body: JSON.stringify(params.data)\n          })\n        )\n      ).then((responses) => ({ data: responses.map(({ json }) => json.id) })),\n\n    /* create_old: (resource, params) =>\n      httpClient(`${apiUrl}/${resource}`, {\n        method: 'POST',\n        body: JSON.stringify(params.data)\n      }).then(({ json }) => ({\n        data: { ...params.data, id: json.id }\n      })), */\n\n    create: (resource, params) => {\n      let type = resource;\n      const arr = settings.endpointToTypeStripLastLetters;\n      for (const i in arr) {\n        if (resource.endsWith(arr[i])) {\n          type = resource.slice(0, arr[i].length * -1);\n          break; // quit after first hit\n        }\n      }\n      const data = {\n        data: {\n          type: type,\n          attributes: params.data\n        }\n      };\n      return httpClient(`${apiUrl}/${resource}`, {\n        method: 'POST',\n        body: JSON.stringify(data)\n      })\n        .then(({ json }) => {\n          const { id, attributes } = json.data;\n          return {\n            data: {\n              id,\n              ...attributes\n            }\n          };\n        })\n        .catch((err: HttpError) => {\n          console.log('catch Error', err.body);\n          const errorHandler = settings.errorHandler;\n          return Promise.reject(errorHandler(err));\n        });\n    },\n\n    delete: (resource, params) =>\n      httpClient(`${apiUrl}/${resource}/${params.id}`, {\n        method: 'DELETE',\n        headers: new Headers({\n          'Content-Type': 'text/plain'\n        })\n      }).then(({ json }) => ({ data: json })),\n\n    // simple-rest doesn't handle filters on DELETE route, so we fallback to calling DELETE n times instead\n    deleteMany: (resource, params) =>\n      Promise.all(\n        params.ids.map((id) =>\n          httpClient(`${apiUrl}/${resource}/${id}`, {\n            method: 'DELETE',\n            headers: new Headers({\n              'Content-Type': 'text/plain'\n            })\n          })\n        )\n      ).then((responses) => ({\n        data: responses.map(({ json }) => json.id)\n      })),\n\n    getResources: () => {\n        const conf = localStorage.getItem('raconf');\n        if(conf && JSON.parse(conf)){\n            return Promise.resolve({data: JSON.parse(conf)});\n        };\n        return httpClient(`${apiUrl}/schema`, {\n            method: 'GET'\n        }).then(({json}) => {\n            localStorage.setItem('raconf', JSON.stringify(json));\n            return { data: json };\n        })}\n    \n  };\n};\n\nfunction capitalize(s: string): string {\n  return s[0].toUpperCase() + s.slice(1);\n}\nexport interface includeRelations {\n  resource: string;\n  includes: string[];\n}\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  \n    <App />\n   ,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}